<div class="chat-area-header">
  <div class="msg p-0">
    <div class="chat-area-group d-lg-none me-2" (click)="goUserList()">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"
        stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-left">
        <line x1="19" y1="12" x2="5" y2="12"></line>
        <polyline points="12 19 5 12 12 5"></polyline>
      </svg>
    </div>
    <img (click)="toggleRightSidenav()" class="msg-profile" src="{{userDetails.image}}" alt="" />
    <div class="chat-area-title" (click)="toggleRightSidenav()">{{userDetails.name}}</div>
  </div>
  <div class="chat-area-group">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"
      stroke-linecap="round" stroke-linejoin="round" class="feather feather-search">
      <circle cx="11" cy="11" r="8"></circle>
      <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
    </svg>
  </div>
</div>
<div class="chat-area-main" #scrollMe>
  <!-- <div class="chat-msg">
    <div class="chat-msg-profile">
      <img class="chat-msg-img" src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/3364143/download+%283%29+%281%29.png"
        alt="" />
      <div class="chat-msg-date">Message seen 1.22pm</div>
    </div>
    <div class="chat-msg-content">
      <div class="chat-msg-text">Luctus et ultrices posuere cubilia curae.</div>
      <div class="chat-msg-text">
        <img
          src="https://media0.giphy.com/media/yYSSBtDgbbRzq/giphy.gif?cid=ecf05e47344fb5d835f832a976d1007c241548cc4eea4e7e&rid=giphy.gif" />
      </div>
      <div class="chat-msg-text">Neque gravida in fermentum et sollicitudin ac orci phasellus egestas. Pretium lectus
        quam id leo.</div>
    </div>
  </div>
  <div class="chat-msg owner">
    <div class="chat-msg-profile">
      <img class="chat-msg-img" src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/3364143/download+%281%29.png"
        alt="" />
      <div class="chat-msg-date">Message seen 1.22pm</div>
    </div>
    <div class="chat-msg-content">
      <div class="chat-msg-text">Sit amet risus nullam eget felis eget. Dolor sed viverra ipsumðŸ˜‚ðŸ˜‚ðŸ˜‚</div>
      <div class="chat-msg-text">Cras mollis nec arcu malesuada tincidunt.</div>
    </div>
  </div>
  <div class="chat-msg">
    <div class="chat-msg-profile">
      <img class="chat-msg-img" src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/3364143/download+%282%29.png" alt="">
      <div class="chat-msg-date">Message seen 2.45pm</div>
    </div>
    <div class="chat-msg-content">
      <div class="chat-msg-text">Aenean tristique maximus tortor non tincidunt. Vestibulum ante ipsum primis in faucibus
        orci luctus et ultrices posuere cubilia curaeðŸ˜Š</div>
      <div class="chat-msg-text">Ut faucibus pulvinar elementum integer enim neque volutpat.</div>
    </div>
  </div>
  <div class="chat-msg owner">
    <div class="chat-msg-profile">
      <img class="chat-msg-img" src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/3364143/download+%281%29.png"
        alt="" />
      <div class="chat-msg-date">Message seen 2.50pm</div>
    </div>
    <div class="chat-msg-content">
      <div class="chat-msg-text">posuere eget augue sodales, aliquet posuere eros.</div>
      <div class="chat-msg-text">Cras mollis nec arcu malesuada tincidunt.</div>
    </div>
  </div>
  <div class="chat-msg">
    <div class="chat-msg-profile">
      <img class="chat-msg-img" src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/3364143/download+%2812%29.png"
        alt="" />
      <div class="chat-msg-date">Message seen 3.16pm</div>
    </div>
    <div class="chat-msg-content">
      <div class="chat-msg-text">Egestas tellus rutrum tellus pellentesque</div>
    </div>
  </div> -->

  <ng-container *ngFor="let item of allMessage">
    <ng-container *ngIf="item.sender_id == userData._id ; else templateA">
      <div class="chat-msg owner">
        <div class="chat-msg-profile">
          <img class="chat-msg-img" src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/3364143/download+%282%29.png"
            alt="" />
          <div class="chat-msg-date">{{calculateDiff(item.createdAt)}} Message sent at {{getTime(item.createdAt)}}</div>
        </div>
        <div class="chat-msg-content">
          <div class="chat-msg-text">{{item.message}}</div>
        </div>
      </div>

    </ng-container>
    <ng-template #templateA>
      <div class="chat-msg">
        <div class="chat-msg-profile">
          <img class="chat-msg-img" src="{{userDetails.image}}" alt="">
          <div class="chat-msg-date">Message seen 3.16pm</div>
        </div>
        <div class="chat-msg-content">
          <div class="chat-msg-text">{{item.message}}
          </div>
        </div>
      </div>
    </ng-template>
  </ng-container>
</div>
<div class="chat-area-footer">
  <textarea placeholder="Type something here..." (focus)="isEmojiPickerVisible = false" [mentionConfig]="mentionConfig"
    (itemSelected)="closed($event)" (keyup)="handleKeyUp($event)" [(ngModel)]="userInput"></textarea>

  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"
    stroke-linecap="round" stroke-linejoin="round" class="feather feather-smile"
    (click)="isEmojiPickerVisible = !isEmojiPickerVisible;">
    <circle cx="12" cy="12" r="10" />
    <path d="M8 14s1.5 2 4 2 4-2 4-2M9 9h.01M15 9h.01" />
  </svg>
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"
    stroke-linecap="round" stroke-linejoin="round" class="feather feather-paperclip" (click)="triggerBtns()">
    <path
      d="M21.44 11.05l-9.19 9.19a6 6 0 01-8.49-8.49l9.19-9.19a4 4 0 015.66 5.66l-9.2 9.19a2 2 0 01-2.83-2.83l8.49-8.48" />
  </svg>
  <svg viewBox="0 0 24 24" width="24" height="24" class="send" (click)="sendMessage()"
    [ngClass]="{'disabled': disabledBtn}">
    <path fill="currentColor" d="M1.101 21.757 23.8 12.028 1.101 2.3l.011 7.912 13.623 1.816-13.623 1.817-.011 7.912z">
    </path>
  </svg>
  <div class="emoj_overlay" [style.display]="isEmojiPickerVisible || additionalBtns ? 'block' : 'none'"
    (click)="isEmojiPickerVisible = false; additionalBtns = false"></div>
  <emoji-mart class="emoji-mart" [emojiTooltip]="false" [darkMode]="false" [emojiSize]="30" [showPreview]="false"
    [enableSearch]="false" [style.display]="isEmojiPickerVisible ? 'block' : 'none'" (emojiSelect)="addEmoji($event)"
    title="Choose your emoji"></emoji-mart>
  <div class="d-flex addiotnalBtns flex-column" [ngClass]="{'isVisible': additionalBtns}">
    <button>
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
        stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"
        class="feather feather-file">
        <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path>
        <polyline points="13 2 13 9 20 9"></polyline>
      </svg>
    </button>
    <button >
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
        stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"
        class="feather feather-image">
        <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
        <circle cx="8.5" cy="8.5" r="1.5"></circle>
        <polyline points="21 15 16 10 5 21"></polyline>
      </svg>
    </button>
  </div>
</div>